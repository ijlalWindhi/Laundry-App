{"ast":null,"code":"var _jsxFileName = \"/home/dhisa/Documents/Project/Project/Fullstack Web/UKL Laundry/Frontend/src/pages/Transaksi.js\";\nimport React, { Component } from 'react';\nimport Navbar from '../components/Navbar';\nimport NavbarKasir from '../components/NavbarKasir';\nimport NavbarOwner from '../components/NavbarOwner';\nimport { NavLink } from 'react-router-dom';\nimport axios from 'axios';\nimport { Modal, Button, Form } from 'react-bootstrap';\nimport { Badge } from 'react-bootstrap';\nimport { Edit, Trash } from 'react-feather';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Transaksi extends Component {\n  constructor() {\n    super();\n\n    this.headerConfig = () => {\n      let header = {\n        headers: {\n          Authorization: `Bearer ${this.state.token}`\n        }\n      };\n      return header;\n    };\n\n    this.handleChange = e => {\n      this.setState({\n        [e.target.name]: e.target.value\n      });\n    };\n\n    this.handleFile = e => {\n      this.setState({\n        image: e.target.files[0]\n      });\n    };\n\n    this.handleClose = () => {\n      this.setState({\n        isModalOpen: false\n      });\n    };\n\n    this.getKeuntungan = () => {\n      let url = \"http://localhost:8080/transaksi/\" + this.state.outletid;\n      axios.get(url).then(res => {\n        this.setState({\n          transaksi: res.data.transaksi,\n          sumTotal: res.data.sumTotal\n        });\n      }).catch(error => {\n        console.log(error);\n      });\n    };\n\n    this.getTransaksi = () => {\n      let url = \"http://localhost:8080/transaksi/getByOut/\" + this.state.outletid;\n      axios.get(url).then(res => {\n        this.setState({\n          transaksi: res.data.transaksi\n        });\n      }).catch(error => {\n        console.log(error);\n      });\n    };\n\n    this.getOutlet = async () => {\n      let url = \"http://localhost:8080/outlet/\";\n      axios.get(url).then(res => {\n        this.setState({\n          outlet: res.data.outlet\n        });\n        console.log(this.state.outlet);\n      }).catch(error => {\n        console.log(error);\n      });\n    };\n\n    this.getMember = async () => {\n      let url = \"http://localhost:8080/member/\";\n      axios.get(url).then(res => {\n        this.setState({\n          member: res.data.member\n        });\n        console.log(this.state.member);\n      }).catch(error => {\n        console.log(error);\n      });\n    };\n\n    this.getUser = async () => {\n      let url = \"http://localhost:8080/user/\";\n      axios.get(url).then(res => {\n        this.setState({\n          user: res.data.user\n        });\n        console.log(this.state.user);\n      }).catch(error => {\n        console.log(error);\n      });\n    };\n\n    this.handleEdit = item => {\n      this.setState({\n        isModalOpen: true,\n        id_transaksi: item.id_transaksi,\n        status: item.status,\n        action: \"update\"\n      });\n    };\n\n    this.handleSave = e => {\n      e.preventDefault();\n      let form = {\n        id_transaksi: this.state.id_transaksi,\n        status: this.state.status\n      };\n      let url = \"\";\n\n      if (this.state.action === \"insert\") {\n        url = \"http://localhost:8080/transaksi/\" + this.state.id_transaksi;\n        axios.post(url, form).then(res => {\n          this.getTransaksi();\n          this.handleClose();\n        }).catch(err => {\n          console.log(err);\n        });\n      } else {\n        url = \"http://localhost:8080/transaksi/\" + this.state.id_transaksi;\n        axios.put(url, form).then(res => {\n          this.getTransaksi();\n          this.handleClose();\n        }).catch(err => {\n          console.log(err);\n        });\n      }\n    };\n\n    this.Drop = id => {\n      let url = \"http://localhost:8080/transaksi/\" + id;\n\n      if (window.confirm(\"Are you sure to delete this data?\")) {\n        axios.delete(url).then(res => {\n          console.log(res.data.message);\n          this.getTransaksi();\n        }).catch(err => {\n          console.log(err.message);\n        });\n      }\n    };\n\n    this.Detail = id_transaksi => {\n      window.location = '/detail_transaksi/byTransaksi/' + id_transaksi + '/' + this.state.outletid;\n      localStorage.setItem(\"id_transaksi\", id_transaksi);\n    };\n\n    this.handleChoose = selectedItem => {\n      if (localStorage.getItem(\"id_member\") !== null) {\n        let tempCart = [];\n\n        if (localStorage.getItem(\"cart\") !== null) {\n          tempCart = JSON.parse(localStorage.getItem(\"cart\")); // JSON.parse() digunakan untuk mengonversi dari string -> array object\n        } // cek data yang dipilih user ke keranjang belanja\n\n\n        let existItem = tempCart.find(item => item.id_paket === selectedItem.id_paket);\n\n        if (existItem) {\n          // jika item yang dipilih ada pada keranjang belanja\n          window.alert(`You have choose ${selectedItem.nama_paket} package`);\n        } else {\n          // user diminta memasukkan jumlah item yang dibeli\n          let promptJumlah = window.prompt(`Input qty ${selectedItem.nama_paket} `, \"\");\n\n          if (promptJumlah !== null && promptJumlah !== \"\") {\n            // jika user memasukkan jumlah item yang dibeli\n            // menambahkan properti \"jumlahBeli\" pada item yang dipilih\n            selectedItem.qty = promptJumlah; // masukkan item yang dipilih ke dalam cart\n\n            tempCart.push(selectedItem); // simpan array tempCart ke localStorage\n\n            localStorage.setItem(\"cart\", JSON.stringify(tempCart));\n          }\n        }\n      } else {\n        window.alert(\"Choose Member First!!\");\n        window.location = '/choosemember';\n      }\n    };\n\n    this.state = {\n      transaksi: [],\n      outlet: [],\n      member: [],\n      user: [],\n      isModalOpen: false,\n      token: \"\",\n      id_transaksi: 0,\n      id_outlet: \"\",\n      kode_invoice: \"\",\n      id_member: \"\",\n      tgl: \"\",\n      batas_waktu: \"\",\n      tgl_bayar: \"\",\n      biaya_tambahan: \"\",\n      diskon: \"\",\n      pajak: \"\",\n      status: \"\",\n      dibayar: \"\",\n      id_user: \"\",\n      search: \"\",\n      userName: \"\",\n      action: \"\",\n      outletname: \"\",\n      membername: \"\",\n      username: \"\",\n      outletid: 0\n    };\n\n    if (localStorage.getItem('token')) {\n      if (localStorage.getItem('role') === \"admin\" || localStorage.getItem('role') === \"kasir\") {\n        this.state.role = localStorage.getItem('role');\n        this.state.token = localStorage.getItem('token');\n        this.state.userName = localStorage.getItem('name');\n        this.state.outletname = localStorage.getItem('outlet');\n        this.state.outletid = localStorage.getItem('id_outlet');\n        this.state.id_transaksi = localStorage.getItem('id_transaksi');\n        this.state.sumTotal = localStorage.getItem('sumTotal');\n      } else {\n        window.alert(\"You are not an admin/kasir\");\n        window.location = '/login';\n      }\n    } else {\n      window.location = \"/login\";\n    }\n  }\n\n  componentDidMount() {\n    this.getTransaksi();\n    this.getKeuntungan();\n    this.getOutlet();\n    this.getMember();\n    this.getUser();\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex\",\n      children: [this.state.role == \"owner\" && /*#__PURE__*/_jsxDEV(NavbarOwner, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 265,\n        columnNumber: 13\n      }, this), this.state.role == \"admin\" && /*#__PURE__*/_jsxDEV(Navbar, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 13\n      }, this), this.state.role == \"kasir\" && /*#__PURE__*/_jsxDEV(NavbarKasir, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-10 ml-10 w-full\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          className: \"text-3xl font-bold\",\n          children: \"Data Transaksi\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 274,\n          columnNumber: 11\n        }, this), this.state.role == \"admin\" && /*#__PURE__*/_jsxDEV(NavLink, {\n          to: \"/choosemember\",\n          children: [\" \", /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"bg-green-400 text-white text-lg font-medium px-3 py-2 rounded-xl my-3\",\n            id: \"btn-blue\",\n            children: \"+ Tambah Transaksi\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 278,\n            columnNumber: 44\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 278,\n          columnNumber: 15\n        }, this), this.state.role == \"kasir\" && /*#__PURE__*/_jsxDEV(NavLink, {\n          to: \"/choosemember\",\n          children: [\" \", /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"bg-green-400 text-white text-lg font-medium px-3 py-2 rounded-xl my-3\",\n            id: \"btn-blue\",\n            children: \"+ Tambah Transaksi\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 281,\n            columnNumber: 44\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 281,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n          className: \"table text-sm text-left text-gray-500  w-full\",\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            className: \"text-white  text-center bg-gray-700\",\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              className: \"text-lg\",\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Kode Invoice\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 286,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Nama Outlet\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 287,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Member Name\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 288,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Tgl Pesan\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 289,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Tgl Bayar\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 290,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Batas Waktu\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 291,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Status\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 292,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Dibayar\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 293,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Total\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 294,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Aksi\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 295,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 285,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 284,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            className: \"text-lg text-center text-black\",\n            children: this.state.transaksi.map((item, index) => {\n              return /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  children: item.kode_invoice\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 302,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: item.outlet.nama\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 303,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: item.member.nama\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 304,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: item.tgl\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 305,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: item.batas_waktu\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 306,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: item.tgl_bayar\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 307,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: [item.status == \"baru\" && /*#__PURE__*/_jsxDEV(Badge, {\n                    bg: \"danger\",\n                    children: item.status\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 309,\n                    columnNumber: 37\n                  }, this), item.status == \"proses\" && /*#__PURE__*/_jsxDEV(Badge, {\n                    bg: \"warning\",\n                    children: item.status\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 312,\n                    columnNumber: 37\n                  }, this), item.status == \"selesai\" && /*#__PURE__*/_jsxDEV(Badge, {\n                    bg: \"info\",\n                    children: item.status\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 315,\n                    columnNumber: 37\n                  }, this), item.status == \"diambil\" && /*#__PURE__*/_jsxDEV(Badge, {\n                    bg: \"success\",\n                    children: item.status\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 318,\n                    columnNumber: 37\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 308,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: [item.dibayar == \"belum_bayar\" && /*#__PURE__*/_jsxDEV(Badge, {\n                    bg: \"danger\",\n                    children: item.dibayar\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 321,\n                    columnNumber: 37\n                  }, this), item.dibayar == \"dibayar\" && /*#__PURE__*/_jsxDEV(Badge, {\n                    bg: \"success\",\n                    children: item.dibayar\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 324,\n                    columnNumber: 37\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 320,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: [\"Rp. \", item.total]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 326,\n                  columnNumber: 33\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"bg-blue-500 hover:bg-blue-700 text-white p-2\",\n                    onClick: () => this.handleEdit(item),\n                    children: /*#__PURE__*/_jsxDEV(Edit, {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 328,\n                      columnNumber: 124\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 328,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"ml-2 bg-red-500 hover:bg-red-700 text-white p-2\",\n                    id: \"blue\",\n                    onClick: () => this.Drop(item.id_outlet),\n                    children: /*#__PURE__*/_jsxDEV(Trash, {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 329,\n                      columnNumber: 141\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 329,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"ml-2 bg-green-500 hover:bg-green-700 text-white px-4 py-1 mt-2\",\n                    onClick: () => this.Detail(item.id_transaksi),\n                    children: \"Detail\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 330,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 327,\n                  columnNumber: 21\n                }, this)]\n              }, index, true, {\n                fileName: _jsxFileName,\n                lineNumber: 301,\n                columnNumber: 19\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 298,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 283,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 273,\n        columnNumber: 10\n      }, this), /*#__PURE__*/_jsxDEV(Modal, {\n        show: this.state.isModalOpen,\n        onHide: this.handleClose,\n        children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n          closeButton: true,\n          children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n            children: \"Transaction Data\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 340,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 339,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Form, {\n          onSubmit: e => this.handleSave(e),\n          children: [/*#__PURE__*/_jsxDEV(Modal.Body, {\n            children: /*#__PURE__*/_jsxDEV(Form.Group, {\n              className: \"mb-2\",\n              controlId: \"status\",\n              children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                children: \"Status\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 345,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Form.Select, {\n                type: \"text\",\n                name: \"status\",\n                onChange: this.handleChange,\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: this.state.status,\n                  children: this.state.status\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 347,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"baru\",\n                  children: \"baru\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 348,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"proses\",\n                  children: \"proses\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 349,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"selesai\",\n                  children: \"selesai\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 350,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"diambil\",\n                  children: \"diambil\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 351,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 346,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 344,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 343,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"primary\",\n              type: \"submit\",\n              id: \"blue\",\n              children: \"Save\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 356,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 355,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 342,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 338,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default Transaksi;","map":{"version":3,"sources":["/home/dhisa/Documents/Project/Project/Fullstack Web/UKL Laundry/Frontend/src/pages/Transaksi.js"],"names":["React","Component","Navbar","NavbarKasir","NavbarOwner","NavLink","axios","Modal","Button","Form","Badge","Edit","Trash","Transaksi","constructor","headerConfig","header","headers","Authorization","state","token","handleChange","e","setState","target","name","value","handleFile","image","files","handleClose","isModalOpen","getKeuntungan","url","outletid","get","then","res","transaksi","data","sumTotal","catch","error","console","log","getTransaksi","getOutlet","outlet","getMember","member","getUser","user","handleEdit","item","id_transaksi","status","action","handleSave","preventDefault","form","post","err","put","Drop","id","window","confirm","delete","message","Detail","location","localStorage","setItem","handleChoose","selectedItem","getItem","tempCart","JSON","parse","existItem","find","id_paket","alert","nama_paket","promptJumlah","prompt","qty","push","stringify","id_outlet","kode_invoice","id_member","tgl","batas_waktu","tgl_bayar","biaya_tambahan","diskon","pajak","dibayar","id_user","search","userName","outletname","membername","username","role","componentDidMount","render","map","index","nama","total"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport Navbar from '../components/Navbar';\r\nimport NavbarKasir from '../components/NavbarKasir';\r\nimport NavbarOwner from '../components/NavbarOwner';\r\nimport {NavLink} from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport { Modal, Button, Form } from 'react-bootstrap';\r\nimport { Badge} from 'react-bootstrap';\r\nimport {Edit, Trash} from 'react-feather'\r\n\r\n\r\nclass Transaksi extends Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      transaksi: [],\r\n      outlet: [],\r\n      member: [],\r\n      user: [],\r\n      isModalOpen: false,\r\n      token: \"\",\r\n      id_transaksi: 0,\r\n      id_outlet: \"\",\r\n      kode_invoice: \"\",\r\n      id_member: \"\",\r\n      tgl: \"\",\r\n      batas_waktu: \"\",\r\n      tgl_bayar: \"\",\r\n      biaya_tambahan: \"\",\r\n      diskon: \"\",\r\n      pajak: \"\",\r\n      status: \"\",\r\n      dibayar: \"\",\r\n      id_user: \"\",\r\n      search: \"\",\r\n      userName: \"\",\r\n      action: \"\",\r\n      outletname: \"\",\r\n      membername: \"\",\r\n      username: \"\",\r\n      outletid: 0\r\n\r\n    }\r\n    if (localStorage.getItem('token')) {\r\n      if (localStorage.getItem('role') === \"admin\" || localStorage.getItem('role') === \"kasir\") {\r\n        this.state.role = localStorage.getItem('role')\r\n        this.state.token = localStorage.getItem('token')\r\n        this.state.userName = localStorage.getItem('name')\r\n        this.state.outletname = localStorage.getItem('outlet')\r\n        this.state.outletid = localStorage.getItem('id_outlet')\r\n        this.state.id_transaksi = localStorage.getItem('id_transaksi')\r\n        this.state.sumTotal = localStorage.getItem('sumTotal')\r\n      } else {\r\n        window.alert(\"You are not an admin/kasir\")\r\n        window.location = '/login'\r\n      }\r\n    } else {\r\n      window.location = \"/login\"\r\n    }\r\n  }\r\n\r\n  headerConfig = () => {\r\n    let header = {\r\n      headers: { Authorization: `Bearer ${this.state.token}` }\r\n    }\r\n    return header\r\n  }\r\n\r\n  handleChange = (e) => {\r\n    this.setState({\r\n      [e.target.name]: e.target.value\r\n    })\r\n  }\r\n\r\n  handleFile = (e) => {\r\n    this.setState({\r\n      image: e.target.files[0]\r\n    })\r\n  }\r\n\r\n  handleClose = () => {\r\n    this.setState({\r\n      isModalOpen: false,\r\n    })\r\n  }\r\n\r\n  getKeuntungan = () => {\r\n    let url = \"http://localhost:8080/transaksi/\" + this.state.outletid\r\n    axios.get(url)\r\n      .then(res => {\r\n        this.setState({\r\n          transaksi: res.data.transaksi,\r\n          sumTotal: res.data.sumTotal\r\n        })\r\n      })\r\n      .catch(error => {\r\n        console.log(error)\r\n      })\r\n  }\r\n\r\n  getTransaksi = () => {\r\n    let url = \"http://localhost:8080/transaksi/getByOut/\" + this.state.outletid\r\n    axios.get(url)\r\n      .then(res => {\r\n        this.setState({\r\n          transaksi: res.data.transaksi\r\n        })\r\n      })\r\n      .catch(error => {\r\n        console.log(error)\r\n      })\r\n  }\r\n\r\n  getOutlet = async () => {\r\n    let url = \"http://localhost:8080/outlet/\"\r\n    axios.get(url)\r\n      .then(res => {\r\n        this.setState({\r\n          outlet: res.data.outlet\r\n        })\r\n        console.log(this.state.outlet)\r\n      })\r\n      .catch(error => {\r\n        console.log(error)\r\n      })\r\n  }\r\n\r\n  getMember = async () => {\r\n    let url = \"http://localhost:8080/member/\"\r\n    axios.get(url)\r\n      .then(res => {\r\n        this.setState({\r\n          member: res.data.member\r\n        })\r\n        console.log(this.state.member)\r\n      })\r\n      .catch(error => {\r\n        console.log(error)\r\n      })\r\n  }\r\n\r\n  getUser = async () => {\r\n    let url = \"http://localhost:8080/user/\"\r\n    axios.get(url)\r\n      .then(res => {\r\n        this.setState({\r\n          user: res.data.user\r\n        })\r\n        console.log(this.state.user)\r\n      })\r\n      .catch(error => {\r\n        console.log(error)\r\n      })\r\n  }\r\n  \r\n\r\n  handleEdit = (item) => {\r\n    this.setState({\r\n      isModalOpen: true,\r\n      id_transaksi: item.id_transaksi,\r\n      status: item.status,\r\n      action: \"update\",\r\n    })\r\n  }\r\n\r\n  handleSave = (e) => {\r\n    e.preventDefault()\r\n    let form = {\r\n      id_transaksi: this.state.id_transaksi,\r\n      status: this.state.status\r\n    }\r\n    let url = \"\"\r\n    if (this.state.action === \"insert\") {\r\n      url = \"http://localhost:8080/transaksi/\" + this.state.id_transaksi\r\n      axios.post(url, form)\r\n        .then(res => {\r\n          this.getTransaksi()\r\n          this.handleClose()\r\n        })\r\n        .catch(err => {\r\n          console.log(err)\r\n        })\r\n    } else {\r\n      url = \"http://localhost:8080/transaksi/\" + this.state.id_transaksi\r\n      axios.put(url, form)\r\n        .then(res => {\r\n          this.getTransaksi()\r\n          this.handleClose()\r\n        })\r\n        .catch(err => {\r\n          console.log(err)\r\n        })\r\n    }\r\n  }\r\n\r\n  Drop = (id) => {\r\n    let url = \"http://localhost:8080/transaksi/\" + id\r\n    if (window.confirm(\"Are you sure to delete this data?\")) {\r\n      axios.delete(url)\r\n        .then(res => {\r\n          console.log(res.data.message)\r\n          this.getTransaksi()\r\n        })\r\n        .catch(err => {\r\n          console.log(err.message)\r\n        })\r\n    }\r\n  }\r\n\r\n  Detail = (id_transaksi) => {\r\n    window.location = '/detail_transaksi/byTransaksi/' + id_transaksi + '/' + this.state.outletid\r\n    localStorage.setItem(\"id_transaksi\", id_transaksi)\r\n  }\r\n\r\n  handleChoose = (selectedItem) =>{\r\n    if(localStorage.getItem(\"id_member\") !== null){\r\n      let tempCart = []\r\n\r\n      if(localStorage.getItem(\"cart\") !== null){\r\n        tempCart = JSON.parse(localStorage.getItem(\"cart\"))\r\n        // JSON.parse() digunakan untuk mengonversi dari string -> array object\r\n      }\r\n\r\n       // cek data yang dipilih user ke keranjang belanja\r\n       let existItem = tempCart.find(item => item.id_paket === selectedItem.id_paket)\r\n       if (existItem) {\r\n           // jika item yang dipilih ada pada keranjang belanja\r\n           window.alert(`You have choose ${selectedItem.nama_paket} package`)\r\n       }\r\n       else {\r\n           // user diminta memasukkan jumlah item yang dibeli\r\n           let promptJumlah = window.prompt(`Input qty ${selectedItem.nama_paket} `, \"\")\r\n           if (promptJumlah !== null && promptJumlah !== \"\") {\r\n               // jika user memasukkan jumlah item yang dibeli\r\n               // menambahkan properti \"jumlahBeli\" pada item yang dipilih\r\n               selectedItem.qty = promptJumlah\r\n               // masukkan item yang dipilih ke dalam cart\r\n               tempCart.push(selectedItem)\r\n               // simpan array tempCart ke localStorage\r\n               localStorage.setItem(\"cart\", JSON.stringify(tempCart))\r\n           }\r\n       }\r\n\r\n\r\n\r\n    }else{\r\n      window.alert(\"Choose Member First!!\")\r\n      window.location = '/choosemember'\r\n    }\r\n  }\r\n  \r\n\r\n  componentDidMount() {\r\n    this.getTransaksi()\r\n    this.getKeuntungan()\r\n    this.getOutlet()\r\n    this.getMember()\r\n    this.getUser()\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className='flex'>\r\n        {this.state.role == \"owner\" &&\r\n            <NavbarOwner />\r\n        }\r\n        {this.state.role == \"admin\" &&\r\n            <Navbar />\r\n        }\r\n        {this.state.role == \"kasir\" &&\r\n            <NavbarKasir />\r\n        }\r\n         <div className=\"mt-10 ml-10 w-full\">\r\n          <h4 className=\"text-3xl font-bold\">\r\n              Data Transaksi\r\n          </h4>\r\n          {this.state.role == \"admin\" &&\r\n              <NavLink to=\"/choosemember\"> <button className=\"bg-green-400 text-white text-lg font-medium px-3 py-2 rounded-xl my-3\" id=\"btn-blue\">+ Tambah Transaksi</button></NavLink>\r\n          }\r\n          {this.state.role == \"kasir\" &&\r\n              <NavLink to=\"/choosemember\"> <button className=\"bg-green-400 text-white text-lg font-medium px-3 py-2 rounded-xl my-3\" id=\"btn-blue\">+ Tambah Transaksi</button></NavLink>\r\n          }\r\n          <table className=\"table text-sm text-left text-gray-500  w-full\">\r\n            <thead className='text-white  text-center bg-gray-700'>\r\n              <tr className='text-lg'>\r\n                <th>Kode Invoice</th>\r\n                <th>Nama Outlet</th>\r\n                <th>Member Name</th>\r\n                <th>Tgl Pesan</th>\r\n                <th>Tgl Bayar</th>\r\n                <th>Batas Waktu</th>\r\n                <th>Status</th>\r\n                <th>Dibayar</th>\r\n                <th>Total</th>\r\n                <th>Aksi</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody className='text-lg text-center text-black'>\r\n              {this.state.transaksi.map((item, index) => {\r\n                return (\r\n                  <tr key={index}>\r\n                    <td>{item.kode_invoice}</td>\r\n                    <td>{item.outlet.nama}</td>\r\n                    <td>{item.member.nama}</td>\r\n                    <td>{item.tgl}</td>\r\n                    <td>{item.batas_waktu}</td>\r\n                    <td>{item.tgl_bayar}</td>\r\n                    <td>{item.status == \"baru\" &&\r\n                                    <Badge bg=\"danger\">{item.status}</Badge>\r\n                                }\r\n                                {item.status == \"proses\" &&\r\n                                    <Badge bg=\"warning\">{item.status}</Badge>\r\n                                }\r\n                                {item.status == \"selesai\" &&\r\n                                    <Badge bg=\"info\">{item.status}</Badge>\r\n                                }\r\n                                {item.status == \"diambil\" &&\r\n                                    <Badge bg=\"success\">{item.status}</Badge>\r\n                                }</td>\r\n                    <td>{item.dibayar == \"belum_bayar\" &&\r\n                                    <Badge bg=\"danger\">{item.dibayar}</Badge>\r\n                                }\r\n                                {item.dibayar == \"dibayar\" &&\r\n                                    <Badge bg=\"success\">{item.dibayar}</Badge>\r\n                                }</td>\r\n                                <td>Rp. {item.total}</td>\r\n                    <td>\r\n                    <button className=\"bg-blue-500 hover:bg-blue-700 text-white p-2\" onClick={() => this.handleEdit(item)}><Edit /></button>\r\n                    <button className=\"ml-2 bg-red-500 hover:bg-red-700 text-white p-2\" id=\"blue\" onClick={() => this.Drop(item.id_outlet)}><Trash /></button>\r\n                    <button className=\"ml-2 bg-green-500 hover:bg-green-700 text-white px-4 py-1 mt-2\" onClick={() => this.Detail(item.id_transaksi)}>Detail</button>\r\n                    </td>\r\n                  </tr>\r\n                )\r\n              })}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n        <Modal show={this.state.isModalOpen} onHide={this.handleClose}>\r\n          <Modal.Header closeButton>\r\n            <Modal.Title>Transaction Data</Modal.Title>\r\n          </Modal.Header>\r\n          <Form onSubmit={e => this.handleSave(e)}>\r\n            <Modal.Body>\r\n              <Form.Group className=\"mb-2\" controlId=\"status\">\r\n                <Form.Label>Status</Form.Label>\r\n                <Form.Select type=\"text\" name=\"status\" onChange={this.handleChange} >\r\n                  <option value={this.state.status}>{this.state.status}</option>\r\n                  <option value=\"baru\">baru</option>\r\n                  <option value=\"proses\">proses</option>\r\n                  <option value=\"selesai\">selesai</option>\r\n                  <option value=\"diambil\">diambil</option>\r\n                </Form.Select>\r\n              </Form.Group>\r\n            </Modal.Body>\r\n            <Modal.Footer>\r\n              <Button variant=\"primary\" type=\"submit\" id=\"blue\">\r\n                Save\r\n              </Button>\r\n            </Modal.Footer>\r\n          </Form>\r\n        </Modal>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Transaksi;"]},"metadata":{},"sourceType":"module"}