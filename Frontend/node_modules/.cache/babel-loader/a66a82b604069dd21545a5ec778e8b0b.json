{"ast":null,"code":"var _jsxFileName = \"/home/dhisa/Documents/Project/Project/Fullstack Web/UKL Laundry/Frontend/src/pages/Paket.js\";\nimport React, { Component } from 'react';\nimport Navbar from '../components/Navbar';\nimport Card from '../components/Card';\nimport axios from 'axios';\nimport { Modal, Button, Form } from 'react-bootstrap';\nimport { MdAdd, MdEdit, MdDeleteOutline } from 'react-icons/md';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Paket extends Component {\n  constructor() {\n    super();\n\n    this.handleChoose = selectedItem => {\n      if (localStorage.getItem(\"id_member\") !== null) {\n        let tempCart = [];\n\n        if (localStorage.getItem(\"cart\") !== null) {\n          tempCart = JSON.parse(localStorage.getItem(\"cart\")); // JSON.parse() digunakan untuk mengonversi dari string -> array object\n        } // cek data yang dipilih user ke keranjang belanja\n\n\n        let existItem = tempCart.find(item => item.id_paket === selectedItem.id_paket);\n\n        if (existItem) {\n          // jika item yang dipilih ada pada keranjang belanja\n          window.alert(`You have choose ${selectedItem.nama_paket} package`);\n        } else {\n          // user diminta memasukkan jumlah item yang dibeli\n          let promptJumlah = window.prompt(`Input qty ${selectedItem.nama_paket} `, \"\");\n\n          if (promptJumlah !== null && promptJumlah !== \"\") {\n            // jika user memasukkan jumlah item yang dibeli\n            // menambahkan properti \"jumlahBeli\" pada item yang dipilih\n            selectedItem.qty = promptJumlah;\n            selectedItem.subtotal = promptJumlah * selectedItem.harga; // masukkan item yang dipilih ke dalam cart\n\n            tempCart.push(selectedItem); // simpan array tempCart ke localStorage\n\n            localStorage.setItem(\"cart\", JSON.stringify(tempCart));\n          }\n        }\n      } else {\n        window.alert(\"Choose Member First!!\");\n        window.location = '/choosemember';\n      }\n    };\n\n    this.handleChange = e => {\n      this.setState({\n        [e.target.name]: e.target.value\n      });\n    };\n\n    this.handleFile = e => {\n      this.setState({\n        image: e.target.files[0]\n      });\n    };\n\n    this.handleClose = () => {\n      this.setState({\n        isModalOpen: false\n      });\n    };\n\n    this.getPacket = () => {\n      let url = \"http://localhost:8080/paket/getByOut/\" + this.state.outletid;\n      axios.get(url).then(res => {\n        this.setState({\n          paket: res.data.paket\n        });\n      }).catch(error => {\n        console.log(error);\n      });\n    };\n\n    this.handleAdd = () => {\n      this.setState({\n        isModalOpen: true,\n        id_outlet: this.state.outletid,\n        jenis: \"\",\n        harga: 0,\n        nama_paket: \"\",\n        action: \"insert\"\n      });\n    };\n\n    this.handleEdit = item => {\n      this.setState({\n        isModalOpen: true,\n        id_outlet: item.id_outlet,\n        jenis: item.jenis,\n        image: item.image,\n        harga: item.harga,\n        nama_paket: item.nama_paket,\n        action: \"update\",\n        id_paket: item.id_paket\n      });\n    };\n\n    this.handleSave = e => {\n      e.preventDefault();\n      let form = new FormData();\n      form.append(\"nama_paket\", this.state.nama_paket);\n      form.append(\"id_outlet\", this.state.id_outlet);\n      form.append(\"harga\", this.state.harga);\n      form.append(\"jenis\", this.state.jenis);\n      let url = \"\";\n\n      if (this.state.action === \"insert\") {\n        url = \"http://localhost:8080/paket/\";\n        axios.post(url, form);\n        console.log(this.state.id_outlet).then(res => {\n          this.getPacket();\n          this.handleClose();\n        }).catch(err => {\n          console.log(err);\n        });\n      } else {\n        url = \"http://localhost:8080/paket/\" + this.state.id_paket;\n        axios.put(url, form).then(res => {\n          this.getPacket();\n          this.handleClose();\n        }).catch(err => {\n          console.log(err);\n        });\n      }\n    };\n\n    this.Drop = id => {\n      let url = \"http://localhost:8080/paket/\" + id;\n\n      if (window.confirm(\"Are you sure to delete this data?\")) {\n        axios.delete(url).then(res => {\n          console.log(res.data.message);\n          this.getPacket();\n        }).catch(err => {\n          console.log(err.message);\n        });\n      }\n    };\n\n    this.handleChoose = selectedItem => {\n      if (localStorage.getItem(\"id_member\") !== null) {\n        let tempCart = [];\n\n        if (localStorage.getItem(\"cart\") !== null) {\n          tempCart = JSON.parse(localStorage.getItem(\"cart\")); // JSON.parse() digunakan untuk mengonversi dari string -> array object\n        } // cek data yang dipilih user ke keranjang belanja\n\n\n        let existItem = tempCart.find(item => item.id_paket === selectedItem.id_paket);\n\n        if (existItem) {\n          // jika item yang dipilih ada pada keranjang belanja\n          window.alert(`You have choose ${selectedItem.nama_paket} package`);\n        } else {\n          // user diminta memasukkan jumlah item yang dibeli\n          let promptJumlah = window.prompt(`Input qty ${selectedItem.nama_paket} `, \"\");\n\n          if (promptJumlah !== null && promptJumlah !== \"\") {\n            // jika user memasukkan jumlah item yang dibeli\n            // menambahkan properti \"jumlahBeli\" pada item yang dipilih\n            selectedItem.qty = promptJumlah; // masukkan item yang dipilih ke dalam cart\n\n            tempCart.push(selectedItem); // simpan array tempCart ke localStorage\n\n            localStorage.setItem(\"cart\", JSON.stringify(tempCart));\n          }\n        }\n      } else {\n        window.alert(\"Choose Member First!!\");\n        window.location = '/choosemember';\n      }\n    };\n\n    this.state = {\n      paket: [],\n      isModalOpen: false,\n      token: \"\",\n      id_member: 0,\n      nama: \"\",\n      alamat: \"\",\n      tlp: \"\",\n      jenis_kelamin: \"\",\n      search: \"\",\n      userName: \"\",\n      action: \"\",\n      outletname: \"\",\n      outletid: 0\n    };\n\n    if (localStorage.getItem('token')) {\n      if (localStorage.getItem('role') === \"admin\") {\n        this.state.role = localStorage.getItem('role');\n        this.state.token = localStorage.getItem('token');\n        this.state.userName = localStorage.getItem('name');\n        this.state.outletname = localStorage.getItem('outlet');\n        this.state.outletid = localStorage.getItem('id_outlet');\n      } else {\n        window.alert(\"You are not an admin\");\n        window.location = '/login';\n      }\n    } else {\n      window.location = \"/login\";\n    }\n  }\n\n  componentDidMount() {\n    this.getPacket();\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex\",\n      children: [/*#__PURE__*/_jsxDEV(Navbar, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-10 ml-10 w-full\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          className: \"text-3xl font-bold\",\n          children: \"Data Paket\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 231,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"bg-green-400 text-white text-lg font-medium px-3 py-2 rounded-xl my-3\",\n          id: \"btn-blue\",\n          onClick: () => this.handleAdd(),\n          children: \"+ Tambah Paket\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row\",\n          children: this.state.paket.map((item, index) => /*#__PURE__*/_jsxDEV(Card, {\n            judul: item.nama_paket,\n            jenis: item.jenis,\n            harga: item.harga,\n            outlet: item.outlet.nama,\n            onEdit: () => this.handleEdit(item),\n            onDrop: () => this.Drop(item.id_paket),\n            onChoose: () => this.handleChoose(item)\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 237,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Modal, {\n        show: this.state.isModalOpen,\n        onHide: this.handleClose,\n        centered: true,\n        children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n          closeButton: true,\n          children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n            children: \"Package\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 252,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 251,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Form, {\n          onSubmit: e => this.handleSave(e),\n          children: [/*#__PURE__*/_jsxDEV(Modal.Body, {\n            children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n              className: \"mb-2\",\n              controlId: \"name\",\n              children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                children: \"Package Name\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 257,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n                type: \"text\",\n                name: \"nama_paket\",\n                placeholder: \"Input package name\",\n                value: this.state.nama_paket,\n                onChange: this.handleChange,\n                required: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 258,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 256,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n              className: \"mb-2\",\n              controlId: \"address\",\n              children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                children: \"Price\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 262,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n                type: \"text\",\n                name: \"harga\",\n                placeholder: \"Input price\",\n                value: this.state.harga,\n                onChange: this.handleChange,\n                required: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 263,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 261,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n              className: \"mb-2\",\n              controlId: \"gender\",\n              children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                children: \"Type\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 267,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Form.Select, {\n                type: \"text\",\n                name: \"jenis\",\n                onChange: this.handleChange,\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: this.state.jenis,\n                  children: this.state.jenis\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 269,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"kiloan\",\n                  children: \"Kiloan\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 270,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"selimut\",\n                  children: \"Selimut\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 271,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"kaos\",\n                  children: \"Kaos\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 272,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"bed_cover\",\n                  children: \"Bed Cover\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 273,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"lain\",\n                  children: \"Lain\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 274,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 268,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 266,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 255,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"primary\",\n              type: \"submit\",\n              id: \"blue\",\n              children: \"Save\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 284,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 283,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default Paket;","map":{"version":3,"sources":["/home/dhisa/Documents/Project/Project/Fullstack Web/UKL Laundry/Frontend/src/pages/Paket.js"],"names":["React","Component","Navbar","Card","axios","Modal","Button","Form","MdAdd","MdEdit","MdDeleteOutline","Paket","constructor","handleChoose","selectedItem","localStorage","getItem","tempCart","JSON","parse","existItem","find","item","id_paket","window","alert","nama_paket","promptJumlah","prompt","qty","subtotal","harga","push","setItem","stringify","location","handleChange","e","setState","target","name","value","handleFile","image","files","handleClose","isModalOpen","getPacket","url","state","outletid","get","then","res","paket","data","catch","error","console","log","handleAdd","id_outlet","jenis","action","handleEdit","handleSave","preventDefault","form","FormData","append","post","err","put","Drop","id","confirm","delete","message","token","id_member","nama","alamat","tlp","jenis_kelamin","search","userName","outletname","role","componentDidMount","render","map","index","outlet"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport Navbar from '../components/Navbar';\r\nimport Card from '../components/Card';\r\nimport axios from 'axios';\r\nimport { Modal, Button, Form } from 'react-bootstrap';\r\nimport { MdAdd, MdEdit, MdDeleteOutline } from 'react-icons/md';\r\n\r\n\r\nclass Paket extends Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      paket: [],\r\n      isModalOpen: false,\r\n      token: \"\",\r\n      id_member: 0,\r\n      nama: \"\",\r\n      alamat: \"\",\r\n      tlp: \"\",\r\n      jenis_kelamin: \"\",\r\n      search: \"\",\r\n      userName: \"\",\r\n      action: \"\",\r\n      outletname: \"\",\r\n      outletid: 0\r\n\r\n    }\r\n    if (localStorage.getItem('token')) {\r\n      if (localStorage.getItem('role') === \"admin\") {\r\n        this.state.role = localStorage.getItem('role')\r\n        this.state.token = localStorage.getItem('token')\r\n        this.state.userName = localStorage.getItem('name')\r\n        this.state.outletname = localStorage.getItem('outlet')\r\n        this.state.outletid = localStorage.getItem('id_outlet')\r\n      } else {\r\n        window.alert(\"You are not an admin\")\r\n        window.location = '/login'\r\n      }\r\n    } else {\r\n      window.location = \"/login\"\r\n    }\r\n  }\r\n\r\n  handleChoose = (selectedItem) => {\r\n    if (localStorage.getItem(\"id_member\") !== null) {\r\n      let tempCart = []\r\n\r\n      if (localStorage.getItem(\"cart\") !== null) {\r\n        tempCart = JSON.parse(localStorage.getItem(\"cart\"))\r\n        // JSON.parse() digunakan untuk mengonversi dari string -> array object\r\n      }\r\n\r\n      // cek data yang dipilih user ke keranjang belanja\r\n      let existItem = tempCart.find(item => item.id_paket === selectedItem.id_paket)\r\n      if (existItem) {\r\n        // jika item yang dipilih ada pada keranjang belanja\r\n        window.alert(`You have choose ${selectedItem.nama_paket} package`)\r\n      }\r\n      else {\r\n        // user diminta memasukkan jumlah item yang dibeli\r\n        let promptJumlah = window.prompt(`Input qty ${selectedItem.nama_paket} `, \"\")\r\n        if (promptJumlah !== null && promptJumlah !== \"\") {\r\n          // jika user memasukkan jumlah item yang dibeli\r\n          // menambahkan properti \"jumlahBeli\" pada item yang dipilih\r\n          selectedItem.qty = promptJumlah\r\n          selectedItem.subtotal = promptJumlah * selectedItem.harga\r\n          // masukkan item yang dipilih ke dalam cart\r\n          tempCart.push(selectedItem)\r\n          // simpan array tempCart ke localStorage\r\n          localStorage.setItem(\"cart\", JSON.stringify(tempCart))\r\n        }\r\n      }\r\n\r\n\r\n\r\n    } else {\r\n      window.alert(\"Choose Member First!!\")\r\n      window.location = '/choosemember'\r\n    }\r\n  }\r\n\r\n  handleChange = (e) => {\r\n    this.setState({\r\n      [e.target.name]: e.target.value\r\n    })\r\n  }\r\n\r\n  handleFile = (e) => {\r\n    this.setState({\r\n      image: e.target.files[0]\r\n    })\r\n  }\r\n\r\n  handleClose = () => {\r\n    this.setState({\r\n      isModalOpen: false,\r\n    })\r\n  }\r\n\r\n  getPacket = () => {\r\n    let url = \"http://localhost:8080/paket/getByOut/\" + this.state.outletid\r\n    axios.get(url)\r\n      .then(res => {\r\n        this.setState({\r\n          paket: res.data.paket\r\n        })\r\n      })\r\n      .catch(error => {\r\n        console.log(error)\r\n      })\r\n  }\r\n\r\n  handleAdd = () => {\r\n    this.setState({\r\n      isModalOpen: true,\r\n      id_outlet: this.state.outletid,\r\n      jenis: \"\",\r\n      harga: 0,\r\n      nama_paket: \"\",\r\n      action: \"insert\"\r\n    })\r\n  }\r\n\r\n  handleEdit = (item) => {\r\n    this.setState({\r\n      isModalOpen: true,\r\n      id_outlet: item.id_outlet,\r\n      jenis: item.jenis,\r\n      image: item.image,\r\n      harga: item.harga,\r\n      nama_paket: item.nama_paket,\r\n      action: \"update\",\r\n      id_paket: item.id_paket\r\n    })\r\n  }\r\n\r\n  handleSave = (e) => {\r\n    e.preventDefault()\r\n    let form = new FormData()\r\n\r\n    form.append(\"nama_paket\", this.state.nama_paket)\r\n    form.append(\"id_outlet\", this.state.id_outlet)\r\n    form.append(\"harga\", this.state.harga)\r\n    form.append(\"jenis\", this.state.jenis)\r\n\r\n    let url = \"\"\r\n    if (this.state.action === \"insert\") {\r\n      url = \"http://localhost:8080/paket/\"\r\n      axios.post(url, form)\r\n      console.log(this.state.id_outlet)\r\n        .then(res => {\r\n          this.getPacket()\r\n          this.handleClose()\r\n        })\r\n        .catch(err => {\r\n          console.log(err)\r\n        })\r\n    } else {\r\n      url = \"http://localhost:8080/paket/\" + this.state.id_paket\r\n      axios.put(url, form)\r\n        .then(res => {\r\n          this.getPacket()\r\n          this.handleClose()\r\n        })\r\n        .catch(err => {\r\n          console.log(err)\r\n        })\r\n    }\r\n  }\r\n\r\n  Drop = (id) => {\r\n    let url = \"http://localhost:8080/paket/\" + id\r\n    if (window.confirm(\"Are you sure to delete this data?\")) {\r\n      axios.delete(url)\r\n        .then(res => {\r\n          console.log(res.data.message)\r\n          this.getPacket()\r\n        })\r\n        .catch(err => {\r\n          console.log(err.message)\r\n        })\r\n    }\r\n  }\r\n\r\n  handleChoose = (selectedItem) =>{\r\n    if(localStorage.getItem(\"id_member\") !== null){\r\n      let tempCart = []\r\n\r\n      if(localStorage.getItem(\"cart\") !== null){\r\n        tempCart = JSON.parse(localStorage.getItem(\"cart\"))\r\n        // JSON.parse() digunakan untuk mengonversi dari string -> array object\r\n      }\r\n\r\n       // cek data yang dipilih user ke keranjang belanja\r\n       let existItem = tempCart.find(item => item.id_paket === selectedItem.id_paket)\r\n       if (existItem) {\r\n           // jika item yang dipilih ada pada keranjang belanja\r\n           window.alert(`You have choose ${selectedItem.nama_paket} package`)\r\n       }\r\n       else {\r\n           // user diminta memasukkan jumlah item yang dibeli\r\n           let promptJumlah = window.prompt(`Input qty ${selectedItem.nama_paket} `, \"\")\r\n           if (promptJumlah !== null && promptJumlah !== \"\") {\r\n               // jika user memasukkan jumlah item yang dibeli\r\n               // menambahkan properti \"jumlahBeli\" pada item yang dipilih\r\n               selectedItem.qty = promptJumlah\r\n               // masukkan item yang dipilih ke dalam cart\r\n               tempCart.push(selectedItem)\r\n               // simpan array tempCart ke localStorage\r\n               localStorage.setItem(\"cart\", JSON.stringify(tempCart))\r\n           }\r\n       }\r\n\r\n\r\n\r\n    }else{\r\n      window.alert(\"Choose Member First!!\")\r\n      window.location = '/choosemember'\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getPacket()\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className='flex'>\r\n        <Navbar />\r\n        <div className=\"mt-10 ml-10 w-full\"> \r\n        <h4 className=\"text-3xl font-bold\">\r\n              Data Paket\r\n          </h4>\r\n          <button className=\"bg-green-400 text-white text-lg font-medium px-3 py-2 rounded-xl my-3\" id=\"btn-blue\" onClick={() => this.handleAdd()}>+ Tambah Paket</button>\r\n          <div className=\"row\">\r\n            {this.state.paket.map((item, index) => (\r\n              <Card\r\n                key={index}\r\n                judul={item.nama_paket}\r\n                jenis={item.jenis}\r\n                harga={item.harga}\r\n                outlet={item.outlet.nama}\r\n                onEdit={() => this.handleEdit(item)}\r\n                onDrop={() => this.Drop(item.id_paket)}\r\n                onChoose={() => this.handleChoose(item)}\r\n              />\r\n            ))}\r\n          </div>\r\n        </div>\r\n        <Modal show={this.state.isModalOpen} onHide={this.handleClose} centered>\r\n          <Modal.Header closeButton>\r\n            <Modal.Title>Package</Modal.Title>\r\n          </Modal.Header>\r\n          <Form onSubmit={e => this.handleSave(e)}>\r\n            <Modal.Body>\r\n              <Form.Group className=\"mb-2\" controlId=\"name\">\r\n                <Form.Label>Package Name</Form.Label>\r\n                <Form.Control type=\"text\" name=\"nama_paket\" placeholder=\"Input package name\"\r\n                  value={this.state.nama_paket} onChange={this.handleChange} required/>\r\n              </Form.Group>\r\n              <Form.Group className=\"mb-2\" controlId=\"address\">\r\n                <Form.Label>Price</Form.Label>\r\n                <Form.Control type=\"text\" name=\"harga\" placeholder=\"Input price\"\r\n                  value={this.state.harga} onChange={this.handleChange} required/>\r\n              </Form.Group>\r\n              <Form.Group className=\"mb-2\" controlId=\"gender\">\r\n                <Form.Label>Type</Form.Label>\r\n                <Form.Select type=\"text\" name=\"jenis\" onChange={this.handleChange} >\r\n                  <option value={this.state.jenis}>{this.state.jenis}</option>\r\n                  <option value=\"kiloan\">Kiloan</option>\r\n                  <option value=\"selimut\">Selimut</option>\r\n                  <option value=\"kaos\">Kaos</option>\r\n                  <option value=\"bed_cover\">Bed Cover</option>\r\n                  <option value=\"lain\">Lain</option>\r\n                </Form.Select>\r\n              </Form.Group>\r\n              {/* <Form.Group className=\"mb-2\" controlId=\"image\">\r\n                <Form.Label>Image</Form.Label>\r\n                <Form.Control type=\"file\" name=\"image\" placeholder=\"Input image\"\r\n                  onChange={this.handleFile} />\r\n              </Form.Group> */}\r\n            </Modal.Body>\r\n            <Modal.Footer>\r\n              <Button variant=\"primary\" type=\"submit\" id=\"blue\">\r\n                Save\r\n              </Button>\r\n            </Modal.Footer>\r\n          </Form>\r\n        </Modal>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Paket;"]},"metadata":{},"sourceType":"module"}