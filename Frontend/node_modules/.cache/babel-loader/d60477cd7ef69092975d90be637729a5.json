{"ast":null,"code":"var _jsxFileName = \"/home/dhisa/Documents/Project/Project/Fullstack Web/UKL Laundry/Frontend/src/pages/Cart.js\";\nimport React from 'react';\nimport { Link, NavLink } from 'react-router-dom';\nimport '../index.css';\nimport axios from 'axios';\nimport Navbar from '../components/Navbar';\nimport NavbarKasir from '../components/NavbarKasir';\nimport NavbarOwner from '../components/NavbarOwner';\nimport { MdAdd, MdEdit, MdDeleteOutline } from 'react-icons/md';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Cart extends React.Component {\n  constructor() {\n    super();\n\n    this.checkOut = () => {\n      let tempCart = [];\n\n      if (localStorage.getItem(\"cart\") !== null) {\n        tempCart = JSON.parse(localStorage.getItem(\"cart\"));\n      }\n\n      let data = {\n        id_outlet: this.state.id_outlet,\n        id_member: this.state.id_member,\n        biaya_tambahan: this.state.total * (10 / 100) - this.state.total * (5 / 100),\n        diskon: this.state.total * (5 / 100),\n        pajak: this.state.total * (10 / 100),\n        status: \"baru\",\n        total: this.state.total + (this.state.total * (10 / 100) - this.state.total * (5 / 100)),\n        dibayar: \"belum_bayar\",\n        id_user: this.state.id_user,\n        detail_transaksi: tempCart\n      };\n      let url = \"http://localhost:8080/transaksi\";\n      axios.post(url, data).then(res => {\n        // clear cart\n        window.alert(\"Success Checkout\");\n        localStorage.removeItem(\"cart\");\n        localStorage.removeItem(\"id_member\");\n        localStorage.removeItem(\"alamat_member\");\n        localStorage.removeItem(\"nama_member\");\n        localStorage.removeItem(\"tlp_member\");\n        localStorage.removeItem(\"jenis_kelamin\");\n        window.location = \"/transaksi\";\n      }).catch(error => {\n        // if (error.res) {\n        //     if (error.res.status) {\n        //         window.alert(error.res.data.message)\n        //         this.props.history.push(\"/login\")\n        //     }\n        // } else {\n        //     console.log(error);\n        // }\n        window.alert(\"Failed Checkout\");\n      });\n    };\n\n    this.initCart = () => {\n      // memanggil data cart pada localStorage\n      let tempCart = [];\n\n      if (localStorage.getItem(\"cart\") !== null) {\n        tempCart = JSON.parse(localStorage.getItem(\"cart\"));\n      } // memanggil data user pada localStorage\n\n\n      let userName = localStorage.getItem(\"user\"); // kalkulasi total harga\n\n      let totalHarga = 0;\n      let keterangan;\n      tempCart.map(item => {\n        totalHarga += item.harga * item.qty;\n        keterangan = \"belum_lunas\";\n      }); // memasukkan data cart, user, dan total harga pada state\n\n      this.setState({\n        cart: tempCart,\n        user: userName,\n        total: totalHarga\n      });\n    };\n\n    this.Drop = item => {\n      // beri konfirmasi untuk menghapus data\n      if (window.confirm(\"Do you want to delete this class from your cart\")) {\n        // menghapus data\n        let tempCart = this.state.cart; // posisi index data yg akan dihapus\n\n        let index = tempCart.indexOf(item); // hapus data\n\n        tempCart.splice(index, 1);\n        localStorage.setItem('cart', JSON.stringify(tempCart));\n        this.setState({\n          cart: tempCart\n        });\n      }\n    };\n\n    this.state = {\n      cart: [],\n      // untuk menyimpan list cart\n      user: \"\",\n      // untuk menyimpan data nama user\n      total: 0 // untuk menyimpan data total belanja\n\n    };\n\n    if (localStorage.getItem('token')) {\n      if (localStorage.getItem('role') === \"admin\" || localStorage.getItem('role') === \"kasir\") {\n        this.state.role = localStorage.getItem('role');\n        this.state.token = localStorage.getItem('token');\n        this.state.userName = localStorage.getItem('name');\n        this.state.id_member = localStorage.getItem('id_member');\n        this.state.id_outlet = localStorage.getItem('id_outlet');\n        this.state.id_user = localStorage.getItem('id_user');\n        this.state.nama = localStorage.getItem('nama_member');\n        this.state.alamat = localStorage.getItem('alamat_member');\n        this.state.jenis_kelamin = localStorage.getItem('jenis_kelamin');\n        this.state.tlp = localStorage.getItem('tlp_member');\n      } else {\n        window.alert(\"You are not an admin/kasir\");\n        window.location = '/login';\n      }\n    } else {\n      window.location = \"/login\";\n    }\n  }\n\n  componentDidMount() {\n    this.initCart();\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex\",\n      children: [this.state.role == \"owner\" && /*#__PURE__*/_jsxDEV(NavbarOwner, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 17\n      }, this), this.state.role == \"admin\" && /*#__PURE__*/_jsxDEV(Navbar, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 17\n      }, this), this.state.role == \"kasir\" && /*#__PURE__*/_jsxDEV(NavbarKasir, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-10 ml-10 w-full\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-md-8 col-lg-12 order-md-last\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"text-3xl font-bold\",\n            children: [\"Pesanan Dari \", this.state.nama]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"h6\", {\n              className: \"font-medium text-base\",\n              children: [\"Nama Member : \", this.state.nama]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 145,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"h6\", {\n              className: \"font-medium text-base\",\n              children: [\"Alamat     : \", this.state.alamat]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 148,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"h6\", {\n              className: \"font-medium text-base\",\n              children: [\"Jenis Kelamin      : \", this.state.jenis_kelamin]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 151,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"h6\", {\n              className: \"font-medium text-base\",\n              children: [\"No Telp     : \", this.state.tlp]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 154,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 157,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n            className: \"list-group \",\n            children: [this.state.cart.map((item, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n              className: \"list-group-item d-flex justify-content-between\",\n              children: [item.nama_paket, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 163,\n                columnNumber: 54\n              }, this), item.qty, \" x Rp \", item.harga, /*#__PURE__*/_jsxDEV(\"div\", {\n                class: \"btn-group\",\n                role: \"group\",\n                \"aria-label\": \"Basic mixed styles example\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"button\",\n                  class: \"btn btn-light\",\n                  children: /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"subTotal\",\n                    children: [\"Rp \", item.harga * item.qty]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 166,\n                    columnNumber: 81\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 166,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn btn-danger\",\n                  id: \"blue\",\n                  onClick: () => this.Drop(item),\n                  children: /*#__PURE__*/_jsxDEV(MdDeleteOutline, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 167,\n                    columnNumber: 114\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 167,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 165,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 162,\n              columnNumber: 33\n            }, this)), /*#__PURE__*/_jsxDEV(\"li\", {\n              className: \"list-group-item d-flex justify-content-between\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Total\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 172,\n                columnNumber: 37\n              }, this), \"Rp. \", this.state.total]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 171,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 159,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 175,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(NavLink, {\n            to: \"/paket\",\n            className: \"btn btn-light btn-lg w-100\",\n            type: \"submit\",\n            children: [/*#__PURE__*/_jsxDEV(MdAdd, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 176,\n              columnNumber: 95\n            }, this), \" Add New Laundry Packet\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 176,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 176,\n            columnNumber: 137\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"bg-green-500 w-full text-lg py-3 text-white rounded-lg mx-auto\",\n            id: \"blue\",\n            onClick: () => this.checkOut(),\n            children: \"Lanjut Pembayaran\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 177,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default Cart;","map":{"version":3,"sources":["/home/dhisa/Documents/Project/Project/Fullstack Web/UKL Laundry/Frontend/src/pages/Cart.js"],"names":["React","Link","NavLink","axios","Navbar","NavbarKasir","NavbarOwner","MdAdd","MdEdit","MdDeleteOutline","Cart","Component","constructor","checkOut","tempCart","localStorage","getItem","JSON","parse","data","id_outlet","state","id_member","biaya_tambahan","total","diskon","pajak","status","dibayar","id_user","detail_transaksi","url","post","then","res","window","alert","removeItem","location","catch","error","initCart","userName","totalHarga","keterangan","map","item","harga","qty","setState","cart","user","Drop","confirm","index","indexOf","splice","setItem","stringify","role","token","nama","alamat","jenis_kelamin","tlp","componentDidMount","render","nama_paket"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport {Link, NavLink} from 'react-router-dom';\r\nimport '../index.css';\r\nimport axios from 'axios';\r\nimport Navbar from '../components/Navbar';\r\nimport NavbarKasir from '../components/NavbarKasir';\r\nimport NavbarOwner from '../components/NavbarOwner';\r\nimport { MdAdd, MdEdit, MdDeleteOutline } from 'react-icons/md';\r\n\r\nclass Cart extends React.Component {\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n            cart: [], // untuk menyimpan list cart\r\n            user: \"\", // untuk menyimpan data nama user\r\n            total: 0, // untuk menyimpan data total belanja\r\n        }\r\n\r\n        if (localStorage.getItem('token')) {\r\n          if (localStorage.getItem('role') === \"admin\" || localStorage.getItem('role') === \"kasir\") {\r\n            this.state.role = localStorage.getItem('role')\r\n            this.state.token = localStorage.getItem('token')\r\n            this.state.userName = localStorage.getItem('name')\r\n            this.state.id_member = localStorage.getItem('id_member')\r\n            this.state.id_outlet = localStorage.getItem('id_outlet')\r\n            this.state.id_user = localStorage.getItem('id_user')\r\n            this.state.nama = localStorage.getItem('nama_member')\r\n            this.state.alamat = localStorage.getItem('alamat_member')\r\n            this.state.jenis_kelamin = localStorage.getItem('jenis_kelamin')\r\n            this.state.tlp = localStorage.getItem('tlp_member')\r\n          } else {\r\n            window.alert(\"You are not an admin/kasir\")\r\n            window.location = '/login'\r\n          }\r\n        } else {\r\n          window.location = \"/login\"\r\n        }\r\n      }\r\n\r\n      checkOut = () => {\r\n        let tempCart = []\r\n        if (localStorage.getItem(\"cart\") !== null) {\r\n            tempCart = JSON.parse(localStorage.getItem(\"cart\"))\r\n        }\r\n        let data = {\r\n            id_outlet: this.state.id_outlet,\r\n            id_member: this.state.id_member,\r\n            biaya_tambahan: this.state.total *(10/100) - this.state.total *(5/100),\r\n            diskon: this.state.total *(5/100),\r\n            pajak: this.state.total *(10/100),\r\n            status: \"baru\",\r\n            total: this.state.total + (this.state.total *(10/100) - this.state.total *(5/100)),\r\n            dibayar: \"belum_bayar\",\r\n            id_user: this.state.id_user,\r\n            detail_transaksi: tempCart\r\n        }\r\n        let url = \"http://localhost:8080/transaksi\"\r\n        axios.post(url, data)\r\n            .then(res => {\r\n                // clear cart\r\n                window.alert(\"Success Checkout\")\r\n                localStorage.removeItem(\"cart\")\r\n                localStorage.removeItem(\"id_member\")\r\n                localStorage.removeItem(\"alamat_member\")\r\n                localStorage.removeItem(\"nama_member\")\r\n                localStorage.removeItem(\"tlp_member\")\r\n                localStorage.removeItem(\"jenis_kelamin\")\r\n                window.location = \"/transaksi\"\r\n                \r\n            })\r\n            .catch(error => {\r\n                // if (error.res) {\r\n                //     if (error.res.status) {\r\n                //         window.alert(error.res.data.message)\r\n                //         this.props.history.push(\"/login\")\r\n                //     }\r\n                // } else {\r\n                //     console.log(error);\r\n                // }\r\n                window.alert(\"Failed Checkout\")\r\n            })\r\n    }\r\n\r\n    initCart = () => {\r\n        // memanggil data cart pada localStorage\r\n        let tempCart = []\r\n        if (localStorage.getItem(\"cart\") !== null) {\r\n            tempCart = JSON.parse(localStorage.getItem(\"cart\"))\r\n        }\r\n        // memanggil data user pada localStorage\r\n        let userName = localStorage.getItem(\"user\")\r\n        // kalkulasi total harga\r\n        let totalHarga = 0;\r\n        let keterangan;\r\n        tempCart.map(item => {\r\n            totalHarga += (item.harga*item.qty)\r\n            keterangan = \"belum_lunas\"\r\n        })\r\n        // memasukkan data cart, user, dan total harga pada state\r\n        this.setState({\r\n            cart: tempCart,\r\n            user: userName,\r\n            total: totalHarga\r\n        })\r\n    }\r\n\r\n    Drop = (item) => {\r\n        // beri konfirmasi untuk menghapus data\r\n        if (window.confirm(\"Do you want to delete this class from your cart\")) {\r\n            // menghapus data\r\n            let tempCart = this.state.cart\r\n            // posisi index data yg akan dihapus\r\n            let index = tempCart.indexOf(item)\r\n\r\n            // hapus data\r\n            tempCart.splice(index, 1)\r\n            localStorage.setItem('cart', JSON.stringify(tempCart))\r\n\r\n            this.setState({ cart: tempCart })\r\n        }\r\n    }\r\n\r\n    componentDidMount(){\r\n        this.initCart()   \r\n    }\r\n\r\n    render(){\r\n        return(\r\n            <div className='flex'>\r\n             {this.state.role == \"owner\" &&\r\n                <NavbarOwner />\r\n            }\r\n            {this.state.role == \"admin\" &&\r\n                <Navbar />\r\n            }\r\n            {this.state.role == \"kasir\" &&\r\n                <NavbarKasir />\r\n            }\r\n            <div className=\"mt-10 ml-10 w-full\">\r\n                <div className=\"col-md-8 col-lg-12 order-md-last\">\r\n                    <h4 className=\"text-3xl font-bold\">\r\n                        Pesanan Dari {this.state.nama}\r\n                    </h4>\r\n                    <div className=\"mt-3\">\r\n                        <h6 className='font-medium text-base'>\r\n                            Nama Member : {this.state.nama}\r\n                        </h6>\r\n                        <h6 className='font-medium text-base'>\r\n                            Alamat     : {this.state.alamat}\r\n                        </h6>\r\n                        <h6 className='font-medium text-base'>\r\n                            Jenis Kelamin      : {this.state.jenis_kelamin}\r\n                        </h6>\r\n                        <h6 className='font-medium text-base'>\r\n                            No Telp     : {this.state.tlp}\r\n                        </h6>\r\n                        <br></br>\r\n                    </div>\r\n                            <ul className=\"list-group \">\r\n                            { this.state.cart.map( (item, index) =>\r\n                                (\r\n                                <li className=\"list-group-item d-flex justify-content-between\">\r\n                                    {item.nama_paket}<br></br>\r\n                                    {item.qty} x Rp {item.harga} \r\n                                    <div class=\"btn-group\" role=\"group\" aria-label=\"Basic mixed styles example\">\r\n                                    <button type=\"button\" class=\"btn btn-light\"><p className='subTotal'>Rp { item.harga * item.qty }</p></button>\r\n                                    <button className='btn btn-danger' id=\"blue\" onClick={() => this.Drop(item)}><MdDeleteOutline /></button>\r\n                                    </div>\r\n                                </li>\r\n                                    ) ) }\r\n                                <li className=\"list-group-item d-flex justify-content-between\">\r\n                                    <span>Total</span>Rp. {this.state.total} \r\n                                </li>\r\n                            </ul>\r\n                        <br></br>\r\n                    <NavLink to='/paket' className=\"btn btn-light btn-lg w-100\" type=\"submit\"><MdAdd /> Add New Laundry Packet</NavLink><br></br>\r\n                    <button className=\"bg-green-500 w-full text-lg py-3 text-white rounded-lg mx-auto\" id=\"blue\" onClick={() => this.checkOut()}>Lanjut Pembayaran</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        )\r\n        }\r\n}\r\n\r\nexport default Cart;"]},"metadata":{},"sourceType":"module"}